@page "/awards"
@page "/awards/{typeShow}"

@inject HttpClient Http

@if (typeShow == "govahi")
{
    <h3 class="center">گواهینامه ها</h3>
}
else
{
    <h3 class="center">جوایز، تقدیرنامه ها</h3>
}

<div class="row">
    @if (AwardsArr == null)
    {
        <p><em>بارگیری...</em></p>
    }
    else
    {
        @foreach (AwardModel award in AwardsArr)
        {
            <div class="col-md-4">
            <div class="thumbnail">
                    <a href="@award.img" target="_blank">
                    <img src="@string.Format("/images/{0}", award.img)" alt="@award.title" style="width:100%">
                    <div class="caption">
                        <p class="text-center">@award.title</p>
                        @* <p>@award.desc</p> *@
                    </div>
                    </a>
                </div>
            </div>
        }
    }
</div>

@code {
    [Parameter]
    public string typeShow { get; set; }= "award";

    public AwardModel[] AwardsArr;


    protected override async Task  OnParametersSetAsync()
    {
        try {
            if (typeShow == "govahi")
            {
                AwardsArr = await Http.GetFromJsonAsync<AwardModel[]>("govahies.json");
            }
            else
            {
                AwardsArr = await Http.GetFromJsonAsync<AwardModel[]>("awards.json");
            }
        }
        catch (Exception err) {
            AwardsArr = null;
            Console.WriteLine(err);
        }
        
    }

    public class AwardModel {
        public string title { get; set; }
        public string desc { get; set; }
        public string img { get; set; }
    }

}