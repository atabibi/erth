@page "/purchase"
@inject HttpClient Http

<h3 class="center">خرید</h3>

<div class="card">
    <div class="card-body">
        <h5 class="card-title text-danger">خرید مجوز نرم‌افزار ارث-نسخه مخصوص سازمان ثبت احوال</h5>
        <p class="card-text">
            برای دریافت برچسب سی‌دی لطفا مبلغ
            @gheymatSabt
            را به
            @shomareHesab
            واریز و رسید آنرا از طریق پیامک یا ایتا به شماره
            @mobile
            ارسال فرمایید.
        </p>
        <p class="card-text">
           هر برچسب صرفا متعلق یه یک سیستم و تنها یکبار قابل استفاده است. بنابراین در ذخیره کردن کد فعالسازی دریافتی دقت نمایید تا برای نصبهای احتمالی بعدی 
           بر روی همان سیستم دچار مشکل نشوید
        </p>
        <p class="card-text">
            برای دانلود آخرین نسخه‌ی نرم‌افزار به صفحه
            <a href="/download">دانلود</a>
            مراجعه کنید.
        </p>
        <p class="card-text">
            برای دریافت کد فعالسازی به روش دستی به صفحه
            <a href="/registererth">درخواست کد فعالسازی</a>
            مراجعه کنید.
        </p>
    </div>
</div>


<div class="card">
  <div class="card-body">
    <h5 class="card-title text-success">خرید مجوز نرم‌افزار ارث-نسخه علمی-کاربردی</h5>
    <p class="card-text">
        برای دریافت برچسب سی‌دی لطفا مبلغ
        @gheymatStudent
        را به
        @shomareHesab
            واریز و رسید آنرا از طریق پیامک یا ایتا به شماره
        @mobile
        ارسال فرمایید.
    </p>
    <p class="card-text">
        مشتریانی که نسخه‌ی قبلی نرم‌افزار را خریداری نموده‌اند 
        می‌توانند با همان برچسب قبلی نسخه‌ی جدید را فعالسازی کنند و نیازی به خرید
        مجوز جدید ندارند.
    </p>
    <p class="card-text">
        با داشتن این برچسب می‌توانید نرم‌افزار را حداکثر ۳۰ بار! بر روی 
        یک یا چند سیستم فعال کنید.
    </p>
    <p class="card-text">
        برای دانلود آخرین نسخه‌ی نرم‌افزار به صفحه 
        <a href="/download">دانلود</a>
         مراجعه کنید.
    </p>
    <p class="card-text">
        برای دریافت کد فعالسازی به روش دستی به صفحه 
        <a href="/registererth">درخواست کد فعالسازی</a>
         مراجعه کنید.
    </p>
  </div>
</div>



@code 
{
    string gheymatStudent = "";
    string gheymatSabt = "";
    string shomareHesab = "0104351469001";
    string mobile = "09132708341";

    protected override async Task  OnInitializedAsync()
    {
        await base.OnInitializedAsync();

        try
        {            
            var strPrice = await Http.GetFromJsonAsync<TbActionResult<String>>(
                                    $"api/Settings/GetValueOf?label=StudentVersionPrice"
                                    );

            if (strPrice.Success)
            {
                gheymatStudent = strPrice.Object;
            }

            //-------
            strPrice = await Http.GetFromJsonAsync<TbActionResult<String>>(
                                    $"api/Settings/GetValueOf?label=SabtVersionPrice"
                                    );

            if (strPrice.Success)
            {
                gheymatSabt = strPrice.Object;
            }

            //-------
            var strHesab = await Http.GetFromJsonAsync<TbActionResult<String>>(
                                    $"api/Settings/GetValueOf?label=HesabVariz"
                                    );

            if (strHesab.Success)
            {
                shomareHesab = strHesab.Object;
            }

        }
        catch (System.Exception err)
        {
            Console.WriteLine(err.ToString());
        }
    }

    public class Settings
    {
        public int Price { get; set; }
    }
}