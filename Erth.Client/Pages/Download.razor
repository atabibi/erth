@page "/download"
@inject HttpClient Http

<h3 class="center">دانلود نرم افزار ارث</h3>
<h4 class="text-danger center">@ImportantNews</h4>

@* نسخه مخصوص ثبت احوال *@
<div class="card" style="margin-top:15px;">
    <img style="width: 80%; margin:auto;" src="images/Erth4.3ForSabt.png" class="card-img-top" alt="نرم افزار ارث نسخه ۴/۳ ثبت احوال">
    <div class="card-body">
        <h5 class="card-title text-success">دانلود @SabtVersionFullName</h5>
        <p class="card-text">
        <p>
            <span class="text-danger">امکانات جدید:</span>
            این نسخه برای استفاده در سازمان ثبت احوال کشور بهینه سازی شده است و امکان ایجاد گزارش با فرمت میکروسافت ورد را به کاربر می دهد
        </p>
        <p>
            <span class="text-danger">سیستم مورد نیاز:</span>
            نسخه ۴/۳ بر روی ویندوز ۷ و ۸ و نسخ مختلف ویندوز ۱۰ و ۱۱ قابل نصب است.
            امکان نصب این نسخه بر روی
            <span class="text-danger">
                ویندوز ایکس پی وجود ندارد.
            </span>
        </p>
        <p>
            <span class="text-danger">مهم:</span>
            این نسخه از نرم‌افزار برای اجرا نیاز به
            .Net Framework @DotNetFrameWorkVersionForSabt
            یا بالاتر دارد. از آنجاییکه معمولا فریمورک فوق بر روی ویندوزهای
            ۷ و بالاتر نصب می‌باشد به منظور کاهش حجم دانلود، در داخل برنامه‌ی نصب قرار داده نشده است
            در صورت نیاز می‌توانید آنرا از لینک زیر دانلود و نصب نمایید:
        <p><a href="@DotNetFrameWorkForSabtDownloadLink" target="_blank" class="btn btn-light">دانلود .Net Framework @DotNetFrameWorkVersionForSabt</a></p>
        </p>
        </p>
        <div class="text-center">
            <a href="@SabtVersionDownloadLink" target="_blank" class="btn btn-success">دانلود @SabtVersionFullName</a>
        </div>
    </div>
</div>

@* نسخه علمی کاربردی *@
<div class="card"  style="margin-top:15px;">
    <img style="width: 80%; margin:auto;" src="images/Erth3.4Scientific.png" class="card-img-top" alt="نرم افزار ارث نسخه ۳/۴ علمی کاربردی">
    <div class="card-body">
        <h5 class="card-title">دانلود @StudentVersionFullName</h5>
        <p class="card-text">
        <p>
            <span class="text-danger">امکانات جدید:</span>
            در این نسخه امکان چاپ نتایج حصر وراثت افزوده شده است.
            همچنین در این نسخه مشکل نصب بر روی درایو حاوی ویندوز رفع شده
            و شما می‌توانید نرم‌افزار را بر روی هر مسیر دلخواهی نصب کنید
        </p>
        <p>
            <span class="text-danger">سیستم مورد نیاز:</span>
            @StudentVersionFullName بر روی ویندوز ویستا ویندوز ۷ و ۸ و نسخ مختلف ویندوز ۱۰ قابل نصب است.
            امکان نصب این نسخه بر روی
            <span class="text-danger"> ویندوز ایکس پی وجود ندارد </span>
        </p>
        <p>
            <span class="text-danger">خرید مجوز و فعالسازی:</span>
            پس از نصب نرم‌افزار و در اولین استفاده از آن لازم است آنرا فعال کنید
            برای اینکار نیاز به کد برچسب سی‌دی دارید. با داشتن این
            کد می‌توانید نرم‌افزار را به صورت خودکار یا دستی فعال کنید.
            برای خرید مجوز به صفحه
            <a href="/purchase">خرید نرم‌افزار</a>
            مراجعه کنید.
            مشتریانی که نسخه‌ی قبلی نرم‌افزار را خریداری نموده‌اند
            می‌توانند با همان برچسب قبلی نسخه‌ی جدید را فعالسازی کنند و نیازی به خرید
            مجوز جدید ندارند.
        </p>
        </p>
        <div class="text-center">
            <a href="@StudentVersionDownloadLink" target="_blank" class="btn btn-primary">دانلود @StudentVersionFullName</a>
        </div>
        <br />
        <h5 class="card-title">دانلود @AlmirathVersionFullName</h5>
        <p class="card-text">
        <p>
            <span class="text-danger">نکته:</span>
            این نسخه از نرم‌افزار مخصوص مشتریانی است که کتاب
            "<span class="text-danger">آموزش کاربردی کتاب میراث شرح لمعه بهمراه ۴۰۰ نمودار</span>"
            را خریداری کرده‌اند.
            همراه با نرم افزار یک فایل پاورپوینت نصب می‌شود که میانبر آن در کنار میانبر نرم‌افزار بر روی دسکتاپ ایجاد می‌شود.
            این فایل بعنوان بخش تکمیلی کتاب چاپ شده محسوب می‌گردد و شامل دهها مثال کاربردی است.
            در اسلایدهایی از این فایل که شامل مثال کاربردی است، لینکی وجود دارد که با کلیک بر روی آن، فایل مثال در نرم‌افزار ارث باز شده و
            کاربر می‌تواند به صورت عملی نتیجه مثال را در نرم‌افزار ارث مشاهده کند.
        </p>
        <p>
            <span class="text-danger">روش فعالسازی:</span>
            پس از نصب نرم‌افزار و در اولین استفاده از آن لازم است آنرا فعال کنید
            برای اینکار نیاز به کد برچسب سی‌دی دارید. این کد به همراه کتاب در اختیارتان قرار گرفته است
        </p>
        <p>
            <span class="text-danger">سیستم مورد نیاز:</span>
            این نسخه بر روی ویندوز ویستا ویندوز ۷ و ۸ و نسخ مختلف ویندوز ۱۰ قابل نصب است.
            امکان نصب این نسخه بر روی
            <span class="text-danger"> ویندوز ایکس پی وجود ندارد </span>
        </p>
        </p>
        <div class="text-center">
            <a href="@AlmirathVersionDownloadLink" target="_blank" class="btn btn-primary">دانلود @AlmirathVersionFullName </a>
        </div>
    </div>
</div>

<div class="card" style="margin-top:15px;">
    <img style="width: 80%; margin:auto;" src="images/Erth3.4Pro.png" class="card-img-top" alt="نرم افزار ارث نسخه ۳/۴ حصر وراثت">
    <div class="card-body">
        <h5 class="card-title">دانلود @ProVersionFullName</h5>
        <p class="card-text">
        <p>
            <span class="text-danger">امکانات جدید:</span>
            در این نسخه مشکل نصب بر روی درایو حاوی ویندوز رفع شده است
            و شما می‌توانید نرم‌افزار را بر روی هر مسیر دلخواهی نصب کنید
        </p>
        <p>
            <span class="text-danger">سیستم مورد نیاز:</span>
            نسخه ۳/۴ بر روی ویندوز ویستا ویندوز ۷ و ۸ و نسخ مختلف ویندوز ۱۰ قابل نصب است.
            امکان نصب این نسخه بر روی
            <span class="text-danger">
                ویندوز ایکس پی وجود ندارد. در صورتیکه مجبور به استفاده از
                ویندوز ایکس پی می‌باشید لطفا آخرین نسخه‌ی قبلی یعنی ۳/۳ را نصب کنید.
            </span>
        </p>
        <p>
            <span class="text-danger">مهم:</span>
            این نسخه از نرم‌افزار برای اجرا نیاز به
            .Net Framework @DotNetFrameWorkVersion
            یا بالاتر دارد. از آنجاییکه معمولا فریمورک فوق بر روی ویندوزهای
            ۷ و بالاتر نصب می‌باشد به منظور کاهش حجم دانلود، در داخل برنامه‌ی نصب قرار داده نشده است
            در صورت نیاز می‌توانید آنرا از لینک زیر دانلود و نصب نمایید:
        <p><a href="@DotNetFrameWorkDownloadLink" target="_blank" class="btn btn-light">دانلود .Net Framework</a></p>
        </p>
        </p>
        <div class="text-center">
            <a href="@ProVersionDownloadLink" target="_blank" class="btn btn-primary">دانلود @ProVersionFullName</a>
        </div>
    </div>
</div>


<div class="card" style="margin-top:15px;">
    <h5 class="text-center">نسخه تحت اندروید </h5>
    <img style="width: 80%; margin:auto;" src="images/ErthAndroidApp.png" class="card-img-top" alt="نرم افزار محاسبات ارث، مخصوص اندروید">
    <div class="card-body">
        <h5 class="card-title">دانلود از کافه بازار و مایکت </h5>
        <p class="card-text">
        <p>
            <span class="text-danger">امکانات:</span>
            کاربرد آسان. با امکان محاسبه سهم الارث تمامی طبقات و با نمایش مواد قانونی مورد استناد
        </p>
        <p>
            <span class="text-danger">سیستم مورد نیاز:</span>قابل نصب بر روی اندروید 5 و بالاتر
        </p>

        </p>
        <div class="text-center">
            <a href="https://cafebazaar.ir/app/ir.apsiran.erthapp" target="_blank" class="btn btn-primary">دانلود از کافه بازار</a>
            <a href="https://myket.ir/app/ir.apsiran.erthapp" target="_blank" class="btn btn-primary">دانلود از مایکت</a>
        </div>
    </div>
</div>

@code
{
    string ImportantNews = "";

    string StudentVersionDownloadLink = "";
    string StudentVersionFullName;

    string ProVersionDownloadLink = "";
    string ProVersionFullName;

    string SabtVersionDownloadLink = "";
    string SabtVersionFullName;

    string AlmirathVersionDownloadLink = "";
    string AlmirathVersionFullName;

    string DotNetFrameWorkVersion = "";
    string DotNetFrameWorkDownloadLink = "";

    string DotNetFrameWorkVersionForSabt = "";
    string DotNetFrameWorkForSabtDownloadLink = "";

    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();

        try
        {
            //----------خبر مهم----------
            var str = await Http.GetFromJsonAsync<TbActionResult<String>>(
                                   $"api/Settings/GetValueOf?label=ImportantNews"
                                   );

            if (str.Success)
            {
                ImportantNews = str.Object;
            }

            //----------Student----------
            str = await Http.GetFromJsonAsync<TbActionResult<String>>(
                                   $"api/Settings/GetValueOf?label=StudentVersionDownloadLink"
                                   );

            if (str.Success)
            {
                StudentVersionDownloadLink = str.Object;
            }
            //-------------
            str = await Http.GetFromJsonAsync<TbActionResult<String>>(
                                   $"api/Settings/GetValueOf?label=StudentVersionFullName"
                                   );

            if (str.Success)
            {
                StudentVersionFullName = str.Object;
            }

            //Todo:  باید نسخه ثبت احوال اضافه شود
            // -----------Sabt--------------
            str = await Http.GetFromJsonAsync<TbActionResult<String>>(
                          $"api/Settings/GetValueOf?label=SabtVersionDownloadLink"
                          );

            if (str.Success)
            {
                SabtVersionDownloadLink = str.Object;
            }
            //-----
            str = await Http.GetFromJsonAsync<TbActionResult<String>>(
                                  $"api/Settings/GetValueOf?label=SabtVersionFullName"
                                  );

            if (str.Success)
            {
                SabtVersionFullName = str.Object;
            }

            // -----------PRO--------------
            str = await Http.GetFromJsonAsync<TbActionResult<String>>(
                          $"api/Settings/GetValueOf?label=ProVersionDownloadLink"
                          );

            if (str.Success)
            {
                ProVersionDownloadLink = str.Object;
            }
            //-----
            str = await Http.GetFromJsonAsync<TbActionResult<String>>(
                                  $"api/Settings/GetValueOf?label=ProVersionFullName"
                                  );

            if (str.Success)
            {
                ProVersionFullName = str.Object;
            }

            //-------------Almirath-----
            str = await Http.GetFromJsonAsync<TbActionResult<String>>(
                         $"api/Settings/GetValueOf?label=AlmirathVersionDownloadLink"
                         );

            if (str.Success)
            {
                AlmirathVersionDownloadLink = str.Object;
            }
            //-----
            str = await Http.GetFromJsonAsync<TbActionResult<String>>(
                                  $"api/Settings/GetValueOf?label=AlmirathVersionFullName"
                                  );

            if (str.Success)
            {
                AlmirathVersionFullName = str.Object;
            }

            //-------------.Netfraework-----
            str = await Http.GetFromJsonAsync<TbActionResult<String>>(
                         $"api/Settings/GetValueOf?label=DotNetFrameWorkVersion"
                         );

            if (str.Success)
            {
                DotNetFrameWorkVersion = str.Object;
            }

            str = await Http.GetFromJsonAsync<TbActionResult<String>>(
                         $"api/Settings/GetValueOf?label=DotNetFrameWorkVersionForSabt"
                         );

            if (str.Success)
            {
                DotNetFrameWorkVersionForSabt = str.Object;
            }
            //------------
            str = await Http.GetFromJsonAsync<TbActionResult<String>>(
                             $"api/Settings/GetValueOf?label=DotNetFrameWorkDownloadLink"
                             );

            if (str.Success)
            {
                DotNetFrameWorkDownloadLink = str.Object;
            }
            //-------------------------


        }

        catch (System.Exception err)
        {
            Console.WriteLine(err.ToString());
        }
    }
}